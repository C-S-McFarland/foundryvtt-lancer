<form class="{{cssClass}} lancer-sheet" autocomplete="off">

  {{!-- Sheet Header --}}
  <header class="sheet-header card clipped-bot">
    <div class="flexcol grow">
      <h1 class="charname"><input class="header-field" name="name" type="text" value="{{item.name}}" placeholder="{{localize "lancer.placeholder.name"}}"/></h1>
    </div>
    {{{ ref-portrait-img item.img "img" item }}}
  </header>

  {{!-- Sheet Body --}}
  <div class="flexcol">
    {{!-- TODO: add and delete buttons for ideals and questions --}}
    {{!-- Major Ideals --}}
    <div class="card clipped">
      <div class="lancer-header major">MAJOR IDEALS</div>
      <ul>
        {{#each system.major_ideals}}
          <li>{{{std-string-input (concat "system.major_ideals." @index) classes="lancer-text-field"}}}</li>
        {{/each}}
      </ul>
    </div>

    {{!-- Minor Ideals --}}
    <div class="card clipped">
      <div class="lancer-header major">MINOR IDEALS</div>
      <ul>
        {{#each system.minor_ideals}}
          <li>{{{std-string-input (concat "system.minor_ideals." @index) classes="lancer-text-field"}}}</li>
        {{/each}}
      </ul>
    </div>

    {{!-- Questions --}}
    <div class="card clipped">
      <div class="lancer-header major">QUESTIONS</div>
      {{#each system.questions as |question|}}
        {{{std-string-input (concat "system.questions." (concat @index ".question")) classes="lancer-text-field"}}}
        <ul>
        {{#each question.options as |option|}}
          <li>{{{std-string-input (concat "system.questions." (concat @../index (concat ".options." @index))) classes="lancer-text-field"}}}</li>
        {{/each}}
        </ul>
      {{/each}}
    </div>

    {{!-- Powers --}}
    <div class="card clipped">
      <div class="lancer-header major">POWERS</div>
      {{#each system.powers as |power power_index|}}
        <div class="card clipped">
          <div class="lancer-header major">
            {{!-- TODO: bond icon? --}}
            <i class="cci cci-trait i--m i--light header-icon"> </i> 
            {{{std-string-input (concat "system.powers." (concat power_index ".name")) classes="lancer-text-field"}}}
            <a class="gen-control" data-action="splice" data-path="system.powers.{{power_index}}">
              <i class="fas fa-trash"></i>
            </a>
          </div>
          <div class="flexrow card">
            {{{std-text-input (concat "system.powers." (concat power_index ".frequency")) label="Frequency:" classes="lancer-text-field"}}}
            {{{std-checkbox (concat "system.powers." (concat power_index ".veteran")) label="Veteran:" classes=""}}}
            {{{std-checkbox (concat "system.powers." (concat power_index ".master")) label="Master:" classes=""}}}
          </div>
          {{#if (or power.veteran power.master)}}
            <div class="card">
              <div class="lancer-header minor">
                <span>Prerequisite</span>
                {{{popout-editor-button (concat "system.powers." (concat power_index ".prerequisite")) }}}
              </div>
              <div class="desc-text">{{{safe-html power.prerequisite }}}</div>
            </div>
          {{/if}}
          <div class="card">
            <div class="lancer-header minor">
              <span>Effect</span>
              {{{popout-editor-button (concat "system.powers." (concat power_index ".description")) }}}
            </div>
            <div class="desc-text">{{{safe-html power.description }}}</div>
          </div>
        </div>
      {{/each}}
    </div>
  </div>
</form>
